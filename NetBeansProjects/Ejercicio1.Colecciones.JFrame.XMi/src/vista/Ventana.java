/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package vista;

import modelo.Empresa;
import javax.swing.JOptionPane;
import modelo.Usuario;

/**
 *
 * @author Admin
 */
public class Ventana extends javax.swing.JFrame {

    pnAlta pAlta;                                                               // CREA EL PANEL ALTA
    Empresa miEmpresa;
    Usuario validado;
    pnModificarAdmin pnModAdmin;
    /**
     * Creates new form VAdmin
     */
    public Ventana() {
        initComponents();
    }
    
    public Ventana(Empresa miEmpresa,Usuario validado) {
        initComponents();
        this.miEmpresa=miEmpresa;
        this.validado=validado;
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        jMenuBar1 = new javax.swing.JMenuBar();
        jMenu1 = new javax.swing.JMenu();
        mnuAlta = new javax.swing.JMenuItem();
        mnuModificar = new javax.swing.JMenuItem();
        jMenu2 = new javax.swing.JMenu();
        mnuDesconectar = new javax.swing.JMenuItem();
        mnuSalir = new javax.swing.JMenuItem();

        setDefaultCloseOperation(javax.swing.WindowConstants.DO_NOTHING_ON_CLOSE);
        addWindowListener(new java.awt.event.WindowAdapter() {
            public void windowClosing(java.awt.event.WindowEvent evt) {
                formWindowClosing(evt);
            }
        });
        getContentPane().setLayout(new java.awt.FlowLayout());

        jMenu1.setText("Empleado");

        mnuAlta.setText("Alta de Empleados");
        mnuAlta.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                mnuAltaActionPerformed(evt);
            }
        });
        jMenu1.add(mnuAlta);

        mnuModificar.setText("Modificar Empleados");
        mnuModificar.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                mnuModificarActionPerformed(evt);
            }
        });
        jMenu1.add(mnuModificar);

        jMenuBar1.add(jMenu1);

        jMenu2.setText("Cerrar");

        mnuDesconectar.setText("Cerrar Sesión");
        mnuDesconectar.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                mnuDesconectarActionPerformed(evt);
            }
        });
        jMenu2.add(mnuDesconectar);

        mnuSalir.setText("Salir de la Aplicación");
        mnuSalir.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                mnuSalirActionPerformed(evt);
            }
        });
        jMenu2.add(mnuSalir);

        jMenuBar1.add(jMenu2);

        setJMenuBar(jMenuBar1);

        pack();
    }// </editor-fold>//GEN-END:initComponents

    private void mnuDesconectarActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_mnuDesconectarActionPerformed
        new Login(miEmpresa).setVisible(true);                                           //ABRE LA VENTANA DE LOGIN
        dispose();                                                              //CIERRA LA VENTANA
        pack();                                                                 
//el pack() ajusta el tamaño automaticamente de la ventana para que se vea todo lo que contiene
    }//GEN-LAST:event_mnuDesconectarActionPerformed

    private void mnuSalirActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_mnuSalirActionPerformed
        dispose();                                                              //CIERRA LA VENTANA
        System.exit(0);                                                         //CIERRA LA APLICACION
    }//GEN-LAST:event_mnuSalirActionPerformed

    private void mnuAltaActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_mnuAltaActionPerformed
        quitarPaneles();                                                        //QUITA LOS PANELES
        pAlta = new pnAlta(miEmpresa);                                                   //CREA LOS PANELES
        getContentPane().add(pAlta);                                            //AÑADE EL PANEL DE ALTA
        pack();                                                                 //REFRESCA LA PANTALLA

    }//GEN-LAST:event_mnuAltaActionPerformed

    private void mnuModificarActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_mnuModificarActionPerformed
        quitarPaneles(); 
        pnModAdmin = new pnModificarAdmin(miEmpresa, validado);                                                   
        getContentPane().add(pnModAdmin);                                            
        pack();
    }//GEN-LAST:event_mnuModificarActionPerformed

    private void formWindowClosing(java.awt.event.WindowEvent evt) {//GEN-FIRST:event_formWindowClosing
        int x = JOptionPane.showConfirmDialog(this,                             //DEVUELVE UN VALOR ENTERO 
                "¿DESEA SALIR DEL SISTEMA?",                                    // MENSAJE DE CABECERA ENCIMA DE LOS BOTONES
                "SALIR DEL SISTEMA",                                            // BARRA DE TITULO DE LA VENTANA
                JOptionPane.YES_NO_OPTION);                                     // LOS BOTONES 0 PARA EL CIERRE Y 1 PARA EL NO
        // if(x==JOptionPane.YES_OPTION)                                        //TAMBIEN ES VALIDO ESTA LINEA PARA EL IF EN VEZ DE EL 0
        if(x==0){
            dispose();
            System.exit(0);
        }
    }//GEN-LAST:event_formWindowClosing

    private void quitarPaneles() {
        try {
            remove(pAlta);                                                      // METODO PARA ELIMINAR LOS PANELES ALTA
        } catch (Exception ex) {}                                               // CONTROLA QUE SI NO EXISTE EL PANEL DE ALTA NO DE FALLO AL INTENTAR ELIMINARLO
        pack();                                                                 // REFRESCA LA PANTALLA
    }


    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JMenu jMenu1;
    private javax.swing.JMenu jMenu2;
    private javax.swing.JMenuBar jMenuBar1;
    private javax.swing.JMenuItem mnuAlta;
    private javax.swing.JMenuItem mnuDesconectar;
    private javax.swing.JMenuItem mnuModificar;
    private javax.swing.JMenuItem mnuSalir;
    // End of variables declaration//GEN-END:variables
}
